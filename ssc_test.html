<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SSC Online Mock Test</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #fff; height: 100%; overflow: hidden; }
    .header, .main-container, .left-panel, .right-panel, .modal, .modal-content, .togglebtn, .question-box, .options label {
      box-sizing: border-box;
    }
    .header { display: flex; align-items: center; justify-content: space-between; padding: 10px 16px; border-bottom: 1px solid #ccc; }
    .logo { width: 200px; height: 70px; }
    .center-info { text-align: center; flex: 1; }
    .center-info h2 { margin: 10px; }
    .center-info div { font-size: 20px; margin-top: 5px; }
    .right-info { display: flex; align-items: center; gap: 30px; }
    .time-box { text-align: center; background-color: #ffffcc; padding: 4px 8px; font-size: 25px; font-weight: bold; color: red; border-radius: 4px; }
    .user-img { width: 70px; height: 70px; }

    .main-container { display: flex; height: calc(100vh - 60px); height: 100vh; }
    .left-panel { width: 260px; padding: 10px; border-right: 1px solid; display: flex; flex-direction: column; }
    .right-panel { flex: 1; position: relative; }

    .section-header { display: flex; justify-content: space-between; align-items: center; font-weight: bold; color: #ff6600; }
    .section-buttons { display: flex; overflow-x: auto; gap: 5px; margin: 10px 0; }
    .section-buttons button { padding: 6px 12px; background: #0066ff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    .section-buttons button.active { background-color: green; }

    .question-navigator-title { font-weight: bold; padding: 8px; font-size: 18px; }
    .question-numbers { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
    .question-numbers button { width: 40px; height: 40px; font-weight: bold; border: none; border-radius: 5px; cursor: pointer; background: #0066ff; color: white; }

    .analysis-box { margin-top: 30px; text-align: center; font-size: 16px; background-color: #c2c2c2; padding: 5px; }
    .question-controller { text-align: center; padding: 10px; }
    .question-controller button { background-color: #0066ff; color: white; border: none; border-radius: 8px; cursor: pointer; padding: 10px 14px; margin: 5px; }

    .right-header-side { text-align: right; font-size: 18px; font-weight: bold; margin-right: 10px; }
    .qtime { display: flex; justify-content: space-between; border-bottom: 1px solid; font-size: 16px; padding: 10px; }
    .question-number-display { font-size: 18px; font-weight: bold; }
    .togglebtn { position: absolute; top: 125px; left: -9px; z-index: 100; }
    #togglePanelBtn { font-size: 40px; color: #007bff; border: none; cursor: pointer; background: transparent; }
    .left-panel.hidden { display: none; }
    .right-panel.full { width: 100%; }
    .lang-select { text-align: right; padding: 10px; }
    .question-box { border-top: 1px solid #090909; padding: 10px 15px; }
    .options label { display: block; margin-top: 5px; cursor: pointer; border-bottom: 1px solid #090909; padding: 10px 15px; }
    .options label:hover { background: #e6f0ff; border-color: #0066ff; }

    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.5); }
    .modal-content { background-color: #fff; margin: 10% auto; padding: 20px; border-radius: 5px; width: 90%; max-width: 900px; }
    .modal-header { font-size: 20px; font-weight: bold; display: flex; justify-content: space-between; align-items: center; }
    .close-btn { background: none; border: none; font-size: 24px; cursor: pointer; }
    iframe { width: 100%; height: 400px; border: none; }
    /* Responsive Design for Tablets & Below */
    @media (max-width: 1024px) { 
      .right-panel {
        width: 100%;
      }
      
    }
    @media (max-width: 768px) {
      
      .right-panel {
        width: 100%;
      }
      
    .question-controller {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
    }

  }

  .loader {
  border: 8px solid #f3f3f3;
  border-top: 8px solid #3498db;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
#autoStartOverlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  background: white;
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}


  </style>
</head>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("openSymbols").addEventListener("click", function (e) {
        e.preventDefault();
        document.getElementById("modalSymbols").style.display = "block";
      });
      document.getElementById("openInstructions").addEventListener("click", function (e) {
        e.preventDefault();
        document.getElementById("modalInstructions").style.display = "block";
      });
      // Start test
      loadTestData();
      window.onclick = function (event) {
        const modals = ["modalSymbols", "modalInstructions"];
        modals.forEach(id => {
          const modal = document.getElementById(id);
          if (event.target === modal) {
            modal.style.display = "none";
          }
        });
      };
    });
  </script>

</head>
<body>
  <div id="autoStartOverlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:#ffffff; z-index:9999; display:flex; flex-direction:column; align-items:center; justify-content:center;">
  <h2 style="margin-bottom: 20px; font-size: 24px;">Starting Your Test...</h2>
  <div class="loader"></div>
  <button id="realStartBtn" onclick="startTestFlow()" style="display:none;">Start</button>
</div>



  <div class="header">
    <img src="logo.png" alt="Logo" class="logo" />
    <div class="center-info">
      <h1 id="examName">Loading Test Name...</h1>
      <!-- <h2>SSC ONLINE MOCK TEST</h2> -->
      <div>Roll No : 10011121851122 &nbsp; [Candidate Name]</div>
    </div>
    <div class="right-info">
      <div class="time-box">
        Time Left <br><span id="timer">00:00</span>
      </div>
      <img src="user.png" alt="User" class="user-img" />
    </div>
  </div>

      <div id="modalSymbols" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            Symbols
            <button class="close-btn" onclick="closeModal('modalSymbols')">&times;</button>
          </div>
          <iframe src="symbols.html"></iframe>
        </div>
      </div>
      <!-- Instructions Modal -->
      <div id="modalInstructions" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            Instructions
            <button class="close-btn" onclick="closeModal('modalInstructions')">&times;</button>
          </div>
          <iframe src="instructions.html"></iframe>
        </div>
      </div>

  <div class="main-container">
    <div class="left-panel">
      <div class="section-header">
        <a href="#" id="openSymbols" class="popup-link" style="color: #ff6600;">SYMBOLS</a>
        <a href="#" id="openInstructions" class="popup-link" style="color: #ff6600;">INSTRUCTIONS</a>
      </div>
      <div style="overflow-x: auto;">
        <div class="section-buttons" id="sectionButtons"></div>
      </div>
      <div class="question-navigator-title" id="currentSectionTitle"></div>
      <div class="question-numbers" id="questionButtons"></div>
      <div class="analysis-box"><strong id="sectionNameOnly"></strong></div>
      <div>
        <div style="padding: 10px; display: flex; justify-content: space-between;">
          <span>Answered</span>
          <span id = "answeredCount" style="background-color: yellow; color: red; padding: 2px 6px;">0</span>
        </div>
        <!-- Not Answered Section -->
        <div style="padding: 0 10px 10px; display: flex; justify-content: space-between;">
          <span>Not Answered</span>
          <span id = "notAnsweredCount" style="background-color: yellow; color: red; padding: 2px 6px;">0</span>
        </div>
      </div>
    </div>
    <div class="right-panel">
      <div class="question-controller" id="buttonContainer">
        <button onclick="prevQuestion()">Previous</button>
        <button onclick="markForReview()">Mark for Review</button>
        <button id="nextBtn" onclick="saveAndNext()">Save & Next</button>
      </div>
      <div class="right-header-side">
        <div>Total Questions answered: <span id="totalansweredCount" style="color: red;background-color: yellow;" >0</span></div>
      </div>
      <div class="qtime">
        <div class="question-number-display" id="questionNumberDisplay"></div>
        <div style="color: #ff001e;margin-right: 10px; font-size: 25px;"><strong>Last <span id="lastMin" style="color: blue;">0</span> Minutes</strong></div>
      </div>
      <div class="lang-select">
        <div class="togglebtn"><button id="togglePanelBtn">&#x25C0;</button></div>
        <label for="languageSelect"><strong>Language:</strong></label>
        <select id="languageSelect">
          <option value="en">English</option>
          <option value="hi">Hindi</option>
        </select>
      </div>
      <div class="question-box"><div id="questionBox"></div>
      </div>
    </div>
  </div>
  <div id="summaryModal" class="modal">
    <div class="modal-content">
      <h3 style="text-align:center;">Submit your test</h3>
      <table border="1" style="width: 100%; border-collapse: collapse; text-align: center;">
        <thead style="background-color: #00bcd4; color: white;">
          <tr>
            <th>Section</th><th>No. of questions</th><th>Answered</th>
            <th>Not Answered</th><th>Marked for Review</th><th>Not Visited</th>
          </tr>
        </thead>
        <tbody id="summaryTableBody"></tbody>
      </table>
      <div style="margin-top: 20px; text-align: right;">
        <button onclick="cancelSubmit()" style="background-color: #00bcd4; color: white; border: none; padding: 8px 12px; margin-right: 10px; cursor: pointer;">Close</button>
        <button onclick="finalSubmit()" style="background-color: #00bcd4; color: white; border: none; padding: 8px 12px; cursor: pointer;">Submit</button>
      </div>
    </div>
  </div>


  <script>
    let examKey = new URLSearchParams(location.search).get('exam');
    let file = new URLSearchParams(location.search).get('file');
    let testData = null;
    let currentSectionIndex = 0;
    let currentQuestionIndex = 0;
    let currentLang = 'en';
    let questionStatus = {}; // ✅ Ensure this is declared
    let sectionStatus = {};
    let answers = {};
    let autoSubmitTimeout;
    let currentQuestionId = null;
    let currentSection = null;
    let sectionStartTime = null;
    let sectionTime = {};
    let perQuestionTime = {}; // { questionId: seconds }
    let questionStartTime = Date.now(); // Track when current question loaded


    async function loadTestData() {
      // Get from URL or fallback to localStorage
      let examKey = getQueryParam("exam") || localStorage.getItem("lastExamKey");
      let file = getQueryParam("file") || localStorage.getItem("lastFile");
      if (examKey && file) {
        localStorage.setItem("lastExamKey", examKey);
        localStorage.setItem("lastFile", file);
      }
      if (!examKey || !file) {
        document.body.innerHTML = "<h2 style='color:red;text-align:center;'>❌ Missing exam or file. Please start from test list.</h2>";
        return;
      }
      const path = `sets/${examKey}/${file}`;
      console.log("📦 Loading:", path);
      try {
        const response = await fetch(path);
        if (!response.ok) throw new Error("File not found: " + path);
        const data = await response.json();
        testData = data;
        document.getElementById("examName").textContent = testData.examName || "Mock Test";
        startTest();
      } catch (err) {
        console.error("❌ Error:", err);
        document.body.innerHTML = `<h2 style='color:red;text-align:center;'>❌ Failed to load test:<br>${err.message}</h2>`;
      }
    }

    function getQueryParam(key) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(key);
    }

    function getQKey(sectionName, qId) {
      return `${sectionName}_${qId}`;
    }

    function startTest() {
      sectionStartTime = Date.now();
      currentSection = testData.sections[0].name;
      startTimer(testData.time * 60);
      buildSectionButtons();
      loadSection(0);

      document.getElementById('languageSelect').addEventListener('change', function () {
        currentLang = this.value;
        loadQuestion(currentQuestionIndex);
      });
    }

    function startTimer(duration) {
      let timer = duration;
      const display = document.getElementById('timer');
      const show = document.getElementById('lastMin');
      const interval = setInterval(() => {
        const minutes = String(Math.floor(timer / 60)).padStart(2, '0');
        const seconds = String(timer % 60).padStart(2, '0');
        display.textContent = `${minutes}:${seconds}`;
        show.textContent = `${minutes}`;
        if (--timer < 0) {
          clearInterval(interval);
          generateSummary();
          document.getElementById('summaryModal').style.display = 'block';
          autoSubmitTimeout = setTimeout(() => finalSubmit(), 5000);
        }
      }, 1000);
    }

    function buildSectionButtons() {
      const container = document.getElementById('sectionButtons');
      container.innerHTML = '';
      testData.sections.forEach((section, i) => {
        sectionStatus[section.name] = section.questions.map(q => ({
          visited: false, answered: false, marked: false, selected: null
        }));
        const btn = document.createElement('button');
        btn.textContent = section.name;
        if (i === currentSectionIndex) btn.classList.add('active');
        btn.onclick = () => {
          document.querySelectorAll('#sectionButtons button').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          loadSection(i);
        };
        container.appendChild(btn);
      });
      updateButtonColors();
    }

    function loadSection(index) {
      // ⏱️ Save time spent on the previous section
      if (currentSection && sectionStartTime) {
        const timeSpent = Math.floor((Date.now() - sectionStartTime) / 1000);
        sectionTime[currentSection] = (sectionTime[currentSection] || 0) + timeSpent;
      }

      if (currentQuestionId && questionStartTime) {
        const spent = Math.floor((Date.now() - questionStartTime) / 1000);
        perQuestionTime[currentQuestionId] = (perQuestionTime[currentQuestionId] || 0) + spent;
      }

      // 🔄 Update for new section
      sectionStartTime = Date.now();
      currentSectionIndex = index;
      currentSection = testData.sections[index].name;

      document.getElementById('currentSectionTitle').textContent = testData.sections[index].title;
      document.getElementById('sectionNameOnly').textContent = testData.sections[index].name + ' Analysis';
      currentQuestionIndex = 0;
      buildQuestionButtons();
      loadQuestion(currentQuestionIndex);
      updateButtonColors();
      updateSectionButtonHighlight();
    }

    function updateSectionButtonHighlight() {
      document.querySelectorAll('#sectionButtons button').forEach((btn, idx) => {
        btn.classList.toggle('active', idx === currentSectionIndex);
      });
    }


    function buildQuestionButtons() {
      const container = document.getElementById('questionButtons');
      container.innerHTML = '';
      const section = testData.sections[currentSectionIndex];

      section.questions.forEach((q, i) => {
        const btn = document.createElement('button');
        btn.textContent = q.id;
        btn.dataset.id = q.id;
        btn.onclick = () => {
          currentQuestionIndex = i;
          loadQuestion(i);
        };
        container.appendChild(btn);
      });
      updateButtonColors();
    }

    function loadQuestion(index) {
  const section = testData.sections[currentSectionIndex];
      const question = section.questions[index];
      const sectionName = section.name;
      const box = document.getElementById('questionBox');
      const opts = question.options[currentLang];
      const qId = question.id;
      const key = getQKey(sectionName, qId); // Use this key everywhere

    // Track previous question time
    if (currentQuestionId !== null && questionStartTime !== null) {
      const spent = Math.floor((Date.now() - questionStartTime) / 1000);
      perQuestionTime[currentQuestionId] = (perQuestionTime[currentQuestionId] || 0) + spent;
    }

    // Start time for new question
    currentQuestionId = question.id;
    questionStartTime = Date.now();


      // 🧹 Clear box and set current question state
      box.innerHTML = '';
      currentQuestionIndex = index;
      currentQuestionId = key;
      questionStartTime = Date.now();

      // 🟡 Mark as visited if not answered
      if (!questionStatus[key] && !answers[key]) {
        questionStatus[key] = 'visited';
      }

      // 🧱 Build question HTML
      let html = `<div class="options"><p><strong>${question.text[currentLang]}</strong></p>`;
      opts.forEach(opt => {
        html += `<label><input type="radio" name="q${qId}" value="${opt}" ${answers[key] === opt ? 'checked' : ''} onchange="selectOption(${qId}, '${opt}')"> ${opt}</label>`;
      });
      html += '</div>';
      box.innerHTML = html;

      // 🔢 Display question number
      document.getElementById('questionNumberDisplay').textContent = `Question : ${index + 1}`;

      // 🔁 Update button text
      const isLast = index === section.questions.length - 1 && currentSectionIndex === testData.sections.length - 1;
      document.getElementById('nextBtn').textContent = isLast ? 'Submit' : 'Save & Next';

      updateButtonColors();
    }

    function selectOption(id, value) {
      const sectionName = testData.sections[currentSectionIndex].name;
      const key = getQKey(sectionName, id);
      answers[key] = value;
      questionStatus[key] = 'answered';
      updateButtonColors();
      updateTotalAnsweredCount();
    }


    function markForReview() {
      const q = testData.sections[currentSectionIndex].questions[currentQuestionIndex];
      const sectionName = testData.sections[currentSectionIndex].name;
      const key = getQKey(sectionName, q.id);
      questionStatus[key] = 'marked';
      updateButtonColors();
      saveAndNext();
      updateTotalAnsweredCount();
    }

    function prevQuestion() {
      if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        loadQuestion(currentQuestionIndex);
      } else if (currentSectionIndex > 0) {
        loadSection(currentSectionIndex - 1);
        currentQuestionIndex = testData.sections[currentSectionIndex].questions.length - 1;
        loadQuestion(currentQuestionIndex);
      }
    }

    function saveAndNext() {
      const section = testData.sections[currentSectionIndex];
      if (currentQuestionIndex < section.questions.length - 1) {
        currentQuestionIndex++;
        loadQuestion(currentQuestionIndex);
      } else if (currentSectionIndex < testData.sections.length - 1) {
        loadSection(currentSectionIndex + 1);
      } else {
        submitTest();
      }
    }

    function updateButtonColors() {
      const buttons = document.querySelectorAll('#questionButtons button');
      const sectionName = testData.sections[currentSectionIndex].name;
      let answered = 0;
      let marked = 0;
      let total = testData.sections[currentSectionIndex].questions.length;

      buttons.forEach(btn => {
        const id = btn.dataset.id;
        const key = getQKey(sectionName, id);
        const status = questionStatus[key];

        btn.style.background = '#0066ff';
        if (status === 'answered') {
          btn.style.background = 'green';
          answered++;
        } else if (status === 'marked') {
          btn.style.background = 'yellow';
          marked++;
        } else if (status === 'visited') {
          btn.style.background = 'red';
        }
      });

      document.getElementById('answeredCount').innerText = answered;
      document.getElementById('notAnsweredCount').innerText = total - answered;
      updateTotalAnsweredCount();
    }

    function updateTotalAnsweredCount() {
      let totalAnswered = 0;
      testData.sections.forEach(section => {
        section.questions.forEach(q => {
          const key = getQKey(section.name, q.id);
          if (questionStatus[key] === 'answered') {
            totalAnswered++;
          }
        });
      });
      document.getElementById('totalansweredCount').innerText = totalAnswered;
    }

    function generateSummary() {
      const tbody = document.getElementById("summaryTableBody");
      tbody.innerHTML = "";
      testData.sections.forEach(section => {
        const questions = section.questions;
        const total = questions.length;
        let answered = 0, notAnswered = 0, marked = 0, notVisited = 0;
        questions.forEach(q => {
          const key = getQKey(section.name, q.id);
          const status = questionStatus[key] || "not-visited";
          if (status === "answered") answered++;
          else if (status === "marked") marked++;
          else if (status === "visited") notAnswered++;
          else notVisited++;
        });
        tbody.innerHTML += `<tr><td>${section.name}</td><td>${total}</td><td>${answered}</td>
            <td>${notAnswered}</td><td>${marked}</td><td>${notVisited}</td></tr>`;
      });
    }

    function submitTest() {
      generateSummary();
      document.getElementById('summaryModal').style.display = 'block';
      autoSubmitTimeout = setTimeout(() => finalSubmit(), 5000);
    }

    function finalSubmit() {
      if (currentQuestionId !== null && questionStartTime !== null) {
        const spent = Math.floor((Date.now() - questionStartTime) / 1000);
        perQuestionTime[currentQuestionId] = (perQuestionTime[currentQuestionId] || 0) + spent;
      }
      disableAllButtons()
      localStorage.setItem("userRoll", "10011121851122");
      localStorage.setItem("userName", "Candidate Name");
      localStorage.setItem("perQuestionTime", JSON.stringify(perQuestionTime));
      localStorage.setItem("testData", JSON.stringify(testData));
      localStorage.setItem("userAnswers", JSON.stringify(answers));
      localStorage.setItem("sectionTime", JSON.stringify(sectionTime));

      window.location.href = "sscresult.html";
    }


    function cancelSubmit() {
      document.getElementById("summaryModal").style.display = "none";
      clearTimeout(autoSubmitTimeout);
    }

    function disableAllButtons() {
      document.querySelectorAll('button').forEach(btn => btn.disabled = true);
    }


    document.getElementById('togglePanelBtn').addEventListener('click', () => {
      const leftPanel = document.querySelector('.left-panel');
      const rightPanel = document.querySelector('.right-panel');
      const btn = document.getElementById('togglePanelBtn');
      const isHidden = leftPanel.classList.toggle('hidden');
      rightPanel.classList.toggle('full', isHidden);
      rightPanel.classList.toggle('show-toggle', isHidden);
      // Change triangle direction
      btn.innerHTML = isHidden ? '&#x25B6;' : '&#x25C0;'; // ▶ : ◀
    });

    // 🔒 Disable Right Click
document.addEventListener('contextmenu', function (e) {
  e.preventDefault();
  alert('Right-click is disabled during the test.');
});

// 🛠 Detect Developer Tools
setInterval(() => {
  const devtools = window.outerHeight - window.innerHeight > 200 || window.outerWidth - window.innerWidth > 200;
  if (devtools) {
    alert('Developer tools detected! The test will now close.');
    window.close(); // Close the tab (won't work on all browsers, fallback next line)
    window.location.href = 'about:blank';
  }
}, 1000);

window.addEventListener("DOMContentLoaded", () => {
  // Slight delay to trigger auto fullscreen via user navigation
  setTimeout(() => {
    document.getElementById("realStartBtn").click();
  }, 200);
});

function startTestFlow() {
  // Request Fullscreen
  const el = document.documentElement;
  if (el.requestFullscreen) el.requestFullscreen();
  else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
  else if (el.msRequestFullscreen) el.msRequestFullscreen();

  // Hide loading screen and start test
  document.getElementById("autoStartOverlay").style.display = "none";

  // Begin the test
  loadTestData();

  // Optional: scroll to top in case it’s not at full view
  window.scrollTo({ top: 0, behavior: "smooth" });
}



// 🖥 Auto Fullscreen on Load
document.addEventListener('DOMContentLoaded', () => {
  // Wait for any user interaction before triggering fullscreen
  const enterFullscreen = () => {
    const el = document.documentElement;
    if (el.requestFullscreen) el.requestFullscreen();
    else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
    else if (el.msRequestFullscreen) el.msRequestFullscreen();
    
    document.removeEventListener('click', enterFullscreen); // only once
  };

  // Attach to any first user click
  document.addEventListener('click', enterFullscreen, { once: true });
});


// ❌ Exit Button with Confirmation
const exitBtn = document.createElement("button");
exitBtn.textContent = "Exit Test";
exitBtn.style.position = "fixed";
exitBtn.style.top = "10px";
exitBtn.style.right = "300px";
exitBtn.style.padding = "10px 15px";
exitBtn.style.background = "red";
exitBtn.style.color = "white";
exitBtn.style.border = "none";
exitBtn.style.zIndex = "999";
exitBtn.style.cursor = "pointer";
exitBtn.onclick = () => {
  if (confirm("Are you sure you want to exit the test? All progress will be lost.")) {
    window.location.href = "exam_details.html"; // Replace with your test listing page
  }
};
document.body.appendChild(exitBtn);

// 🔄 Fullscreen Toggle Button
const fullscreenToggle = document.createElement("button");
fullscreenToggle.textContent = "⛶ Fullscreen";
fullscreenToggle.style.position = "fixed";
fullscreenToggle.style.top = "10px";
fullscreenToggle.style.right = "400px";
fullscreenToggle.style.padding = "10px 15px";
fullscreenToggle.style.background = "#0066ff";
fullscreenToggle.style.color = "white";
fullscreenToggle.style.border = "none";
fullscreenToggle.style.zIndex = "999";
fullscreenToggle.style.cursor = "pointer";
fullscreenToggle.onclick = () => {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
};
document.body.appendChild(fullscreenToggle);

// ⌨️ Block Keyboard Shortcuts
document.addEventListener('keydown', function (e) {
  if (
    e.key === "F12" ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "i") ||
    (e.ctrlKey && e.key.toLowerCase() === "u") ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "j") ||
    (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === "c")
  ) {
    e.preventDefault();
    alert("Keyboard shortcuts are disabled during the test.");
  }
});

// 🪟 Detect Tab Switching
document.addEventListener("visibilitychange", () => {
  if (document.hidden) {
    alert("Tab switching is not allowed! This will be considered malpractice.");
  }
});


  </script>
</body>
</html>
